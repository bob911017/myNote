<!DOCTYPE html>
<html>
<head>
	<title>basicLesson</title>
	<link rel="icon" href="https://www.realtek.com/templates/ja_healthcare/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="" type="text/css" charset="utf-8">
	<script type="text/javascript" src=""charset="utf-8"></script>
</head>	  
<style>
div {
	border: blue 1px solid;
	padding: 5px;
	margin-top: 5px;
	white-space: pre-wrap;
}
</style>

<body>

<div>
<b>目的:</b>
	借助電路方面的技巧，在現有技術條件下發揮最大的潛力，而非單純拚工藝。

<b>面對的問題:</b>
	1.對於一個很大的標準單元庫，他也有不連續的缺點(包含單元數目有限)，而且隨著版圖(Layout)中互連線影響加重。需要能夠調整驅動尺寸的單元來優化電路性能和功耗。
	
	2.邏輯門級的標準化，對設計隨機邏輯的功能是非常有效的，但是對設計乘法器、數據通路、儲存器或嵌入式微處理器等這些結構較複雜、要求較高的電路，
	  它的效率比較低。另外對模擬電路設計，使用標準單元無法實現。
	
<b>工具:</b>
	布局佈線工具:
		1.Encounter Digital Implementation System 
			=> RTL to GDS設計平台。主要是導入RTL及代碼，進行芯片的布局佈線和時序分析，最後生成GDS檔案。
		2.IC complier
	時序分析工具:
		1.Encounter Timing System
			=> 提供時序、信號完整性和功耗的統一視圖和單一來源 - 從設計和物理實現，到最後的簽收(Signoff)分析。
		2.PrimeTime
			=> 針對複雜、億萬門芯片進行全芯片、門級靜態時序分析的工具。
	功耗分析工具:
		1.Encounter Power System
			=> 提供一致的、收斂的功耗和電源軌道完整性分析 - 跨越佈圖規則、電源規劃、物理時線、優化與簽收。
		2.PrimeRail
			=> 是一項全芯片的靜態和動態電壓降和電遷移(EM)分析解決方案。提供對時序、信號完整性和電源網路電壓降的全面解決方案。
			   最主要的功能是檢測IR-Drop是否符合標準。
		3.RedHawk
			=> 分析同步開關噪音(內核、內存、I/O)、去耦電容(期望的與本徵的)、片上和片外電感(封裝)的影響。
	等價性檢查工具(形式驗證):
		1.Formality
			=> 是一種等校性的檢測工具採用形式驗證技術判斷一個設計的兩個版本在功能上是否等效，可在一天內進行多次驗證。
			   等效性檢測是一種靜態分析法，無須測試項量即可快速而全面地完成驗證。
		2.Encounter Conformal Equivalent Checker
			=> 無需使用測試向量，從RTL到佈局實現經測的缺陷檢測和糾正。驗證複雜的算法邏輯、訂製內存和訂製數字邏輯。
			   通過使用高級電晶體提取技術和等價檢查(GXL配置)，確保RTL模型執行與在芯片中實現的對應電晶體電路的相同功能。
	寄生參數提取工具:
		1.QRC Extraction
			=> 分析全芯片的寄生參數，並可用
	物理驗證工具

<b>基本能力:</b>
	1.深入了解相關佈局佈線工具的各方面特性級參數
	2.了解後端物理實現中標準單元和宏單元的性能指標及物理參數。
	3.掌握布局佈線需要使用的各種數據信息，了解各種數據的來源。
	4.在布局佈線過程中和前端設計工程師進行有效的配合。
	
</div>

<div>
<b>小知識:</b>

前端設計:從verilog/VHDL代碼(RTL級)編寫驗證再通過整合(synthesis)轉換成門級網表(Gate-level netlist)的過程。
後端設計:把門級網表轉換成實際版圖。

後端半制定設計(APR)是基於現有單元物理庫及近的布局佈線EDA工具的設計，由於在設計中主要部份的標準單元庫(standard cell library)
裡各個單元的高度相當，寬度不限，單元中的電源、地線及輸入輸出端口位置都有特殊規定，使得單元與單元連接時
變得相對簡單、容易，並且帶有很強的規律性。

後端全制定設計方法中電路結構選擇靈活，常見的電路設計形式有靜態CMOS、有比邏輯、傳輸門邏輯和動態的多米諾邏輯、NP-CMOS等。

靜態的IR-Drop:
	產生的主要原因是電源網路的金屬連線分壓所造成的，因此主要與電源網路的結構和金屬連線的細節相關。
	同時考慮到電源線上流過的電流大小，尤其要注意不同金屬層之間用來連接接孔的個數和打孔的位置。
動態的IR-Drop:
	指的是電源在邏輯電路開關切換時電流波動引起的電壓降。

分析通過HSPICE模型引入了邏輯門的寄生參數和耦合電容，並考慮每次翻轉電流的動態波型，側重於局部IR-Drop的影響。

</div>


<div>
<b>APR流程:</b>

1.數據導入:
後端設計所需的設計數據主要包括前端設計後經過綜合生成的門級網表、具有時序約束(Timing Constraint)和時鐘定義的SDC約束文件、物理設計單元庫數據。
同時，也需要流片廠提供的標準單元、宏單元和I/O Pad的庫文件，他包括物理庫、時序庫和網表庫，分別以.lef、.tlf和.v的形式給出。

2.布局規則(floorplan):
該階段完成設計中I/O Pad、宏單元的物理布局、標準單元布局限制和電源網路布局實現。I/O Pad預先留出位置，而宏單元則主要根據時序要求進行擺放，
標準單元則給出一定的區域由工具自動擺放。布局規劃完成後，芯片的大小、Core的面積、Row的形式、電源及地線的Ring和Strip都確定下來。若有必要，
可以把佈局規則已DEF的形式反饋給前端設計者，這樣可以基於實際的物理布局規畫進行更加精確的RTL代碼總和。

3.單元放置(Placement):
佈局規劃後，宏單元、I/O Pad的位置和放置標準單元的區域都已經確定，這些信息會透過DEF文件傳遞APR工具，APR工具根據網表和
時序限制信息進行單元放置標準單元，同時進行時序檢查和單元的放置優化。如果有必要再自動放置標準單元和宏單元之後可以先做初步的IR Drop和EM分析。


4.時鐘樹綜合(Clock Tree Synthesis):
芯片需要時鐘網路來驅動所有的時序單元，所以時鐘源端門單元負載很多，其負載延時很大並且不平衡，需要插入緩衝器以減小負載和平衡延時。
時鐘網路極其緩衝器就構成了時鐘樹。一般要反覆幾次才能做出比較理想的時鐘樹。


5.全局與細節佈線(Global&Detail Route):
佈線是指在滿足公益規則和佈線層數限制、線寬、線間距限制和各線網可靠絕緣的電性能的限制條件下，根據電路的連接關係將各單元和I/O Pad用互連線連接起來，
這些是在時序驅動(Timing Driven)的條件下進行的，保證關鍵時序路徑上的連線長度最小。

6.電壓衰減分析(IR-drop&EM):
佈線完成後，設計數據就基本確定了，對整個設計進行功耗及電壓降分析就更加精確，
因此通過電壓降分析評估電源網路是否達到設計要求。

7.時序驗證與ECO:
在插入時鐘樹後，每個單元的位置就確定了，同時佈線完成後的連線寄生參數也基本確定了，此時對延時參數的提取就比較精確。
APR工具通過DEF和寄生參數文件傳遞給時序分析工具做靜態時序分析。針對靜態時序分析和後仿真中出現的時序違反問題，
通過ECO對電路和單元佈局進行小範圍改動以滿足時序要求。

8.功能等價性檢查:
布局佈線過程需要根據物理情況修改門級網表，所以通過等價性檢查這個過程來確認最終的網表與前端提供的初始網錶功能上是否一致。
該過程可以根據在布局佈線過程中的任何階段進行驗證。

9.物理驗證(LVS&ERC&DRC):
物理驗證中DRC對芯片版圖中的各層物理圖形進行設計規則檢查，他包括天線效應的檢查以確保芯變正常流片。
LVS主要將版圖和電路網表進行比較，保證流片出來的版圖電路和實際設計的電路圖一致。

10.流片(Tapeout):
在所有檢查和驗證都準確無誤的情況下，把最終的版圖GDS II文件傳遞給流片廠進行掩膜(mask)製造。
</div>

<div>
人為手動合理設置RTL module的方法

Soft Guide:
	指定某些模塊集合放置在一起的軟約束，但是並不確定最終的具體位置。

Guide:
	指定某些模塊集合應該放置的區域限制，但是該設置僅僅只是一個指導，對工具來說並非強制的，指定的模塊放置到指定區域外也是可以的。

Region:
	指定某些模塊集合只能放置在該區域中，但是其他模塊也能放置在該區域。

Fence:
	指定某些模塊集合只能放置在該區域中，其他模塊則不能放置在該區域。
</div>

<div>
布局佈線流程:

1.準備布局佈線數據:
	布局佈線之前需要準備好用於設計的數據，比如前端的芯片設計經過綜合後生成的門級網表，含有I/O Pad和宏單元的定義文件和SDC約束文件等。

2.芯片布局:
	需要根據設計需求對I/O Pad和宏單元進行手動布局。
	
3.電源網路實現:
	為了使設計滿足電壓降的設計要求薛要設計合理的電源供電網路。

4.自動放置標準單元:
	佈局規劃後，宏單元、I/O Pad的位置標準單元的區域都已確定，在通過APR工具根據網表和時序約束信息進行自動放置標準單元。

5.時鐘樹綜合:
	通過設計合理的時鐘網路來驅動設計中所有的有效時序單元。

6.佈線:
	根據網表中所有連接關係進行信號線的實際物理佈線連接。

7.芯片版圖完整性實現:
	佈線工作完成後，為確保芯片版圖的完整，需要進行芯片版圖空隙的填充工作。
	
8.布局佈線數據輸出:
	布局佈線工作完成以後就可以導出設計數據用於後續設計的工作。
</div>


</body>
</html>
